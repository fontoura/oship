<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<HTML>
<HEAD>
	<META HTTP-EQUIV="CONTENT-TYPE" CONTENT="text/html; charset=utf-8">
	<TITLE></TITLE>
	<META NAME="GENERATOR" CONTENT="OpenOffice.org 2.4  (Unix)">
	<META NAME="AUTHOR" CONTENT="Tim Cook">
	<META NAME="CREATED" CONTENT="20081024;6430000">
	<META NAME="CHANGEDBY" CONTENT="Tim Cook">
	<META NAME="CHANGED" CONTENT="20081025;18383300">
	<STYLE TYPE="text/css">
	<!--
		@page { size: 8.5in 11in; margin: 0.79in }
		P { margin-bottom: 0.08in }
		H1 { margin-bottom: 0.08in }
		H1.western { font-family: "Nimbus Sans L", sans-serif; font-size: 16pt }
		H1.cjk { font-family: "DejaVu Sans"; font-size: 16pt }
		H1.ctl { font-family: "DejaVu Sans"; font-size: 16pt }
	-->
	</STYLE>
</HEAD>
<BODY LANG="en-US" DIR="LTR">
<DIV TYPE=HEADER>
	<H1 CLASS="western" ALIGN=CENTER STYLE="margin-bottom: 0.2in">OSHIP
	Structure</H1>
</DIV>
<P STYLE="margin-bottom: 0in">This document is intended to describe
the layout and structure of OSHIP.  This will inform healthcare
application developers regarding the operation of OSHIP as well as
how to implement their own applications using OSHIP as a base. 
</P>
<P STYLE="margin-bottom: 0in"><BR>
</P>
<P STYLE="margin-bottom: 0in">The overall diagram seen in the figure
below is at the oship/src/oship level:</P>
<P STYLE="margin-bottom: 0in"><BR>
</P>
<P STYLE="margin-bottom: 0in"><IMG SRC="oship_structure_html_6fd52658.png" NAME="graphics1" ALIGN=LEFT WIDTH=397 HEIGHT=593 BORDER=0><BR>
</P>
<P STYLE="margin-bottom: 0in"><BR>
</P>
<P STYLE="margin-bottom: 0in"><BR>
</P>
<P STYLE="margin-bottom: 0in"><BR>
</P>
<P STYLE="margin-bottom: 0in"><BR>
</P>
<P STYLE="margin-bottom: 0in"><BR>
</P>
<P STYLE="margin-bottom: 0in"><BR>
</P>
<P STYLE="margin-bottom: 0in"><BR>
</P>
<P STYLE="margin-bottom: 0in"><BR>
</P>
<P STYLE="margin-bottom: 0in"><BR>
</P>
<P STYLE="margin-bottom: 0in"><BR>
</P>
<P STYLE="margin-bottom: 0in"><BR>
</P>
<P STYLE="margin-bottom: 0in"><BR>
</P>
<P STYLE="margin-bottom: 0in"><BR>
</P>
<P STYLE="margin-bottom: 0in"><BR>
</P>
<P STYLE="margin-bottom: 0in"><BR>
</P>
<P STYLE="margin-bottom: 0in"><BR>
</P>
<P STYLE="margin-bottom: 0in"><BR>
</P>
<P STYLE="margin-bottom: 0in"><BR>
</P>
<P STYLE="margin-bottom: 0in"><BR>
</P>
<P STYLE="margin-bottom: 0in"><BR>
</P>
<P STYLE="margin-bottom: 0in"><BR>
</P>
<P STYLE="margin-bottom: 0in"><BR>
</P>
<P STYLE="margin-bottom: 0in"><BR>
</P>
<P STYLE="margin-bottom: 0in"><BR>
</P>
<P STYLE="margin-bottom: 0in"><BR>
</P>
<P STYLE="margin-bottom: 0in"><BR>
</P>
<P STYLE="margin-bottom: 0in"><BR>
</P>
<P STYLE="margin-bottom: 0in"><BR>
</P>
<P STYLE="margin-bottom: 0in"><BR>
</P>
<P STYLE="margin-bottom: 0in"><BR>
</P>
<P STYLE="margin-bottom: 0in"><BR>
</P>
<P STYLE="margin-bottom: 0in">The 13606 and hl7 folders are currently
place holders for future work to include these models as part of
OSHIP.  The app_templates folder is where the default OSHIP templates
are stored. Notice that there is also an app.py file.  These are
automatically associated by the Grok machinery. When you create your
own application you will create a myapp.py file and a myapp_templates
folder.  The reasons and processes for this are described in other
documents.  
</P>
<P STYLE="margin-bottom: 0in">The docs folder holds this document 
and other OSHIP documentation.  The km folder is the knowledge module
library for OSHIP.  It is explained in detail below.   The locales
folder contains the i18n translations for OSHIP.   The openehr folder
contains the source code for the openEHR Reference Model.   The
static folder is where static files such as images, CSS and
javascript files are placed for your application.  The utils folder
is a place for us to put various utilities needed by OSHIP that may
not be available as Python eggs through other sources.</P>
<P STYLE="margin-bottom: 0in"><BR>
</P>
<P STYLE="margin-bottom: 0in"><BR>
</P>
<P STYLE="margin-bottom: 0in">The knowledge module library is used
for systems such as openEHR and ISO13606 that use the two level
modeling approach. It may be possible to also create them for HL7v3.
The modules are typically called archetypes since they are an
expression an entire (but only one) clinical concept.  They are
designed by clinical experts and they represent constraints based on
a general reference model.   Both openEHR and ISO13606 use a <A HREF="http://en.wikipedia.org/wiki/Domain_Specific_Language">domain
specific language</A> called the <A HREF="http://www.openehr.org/clinicalmodels/archetypes.html#dsy78-OE_FormalLanguage">Archetype
Definition Language</A> (ADL) to express and transfer these clinical
concepts.      
</P>
<P STYLE="margin-bottom: 0in"><BR>
</P>
<P STYLE="margin-bottom: 0in">In order to improve performance in
OSHIP it has been decided that instead of parsing these ADL files on
fly and creating in memory objects, it is better to translate the ADL
files to Python classes on the file system.  There is a project
underway as part of the OSHIP project to create an automated
translator.  That project is “adl2py”.  During the interim,
everyone can hand write these Python classes by interpreting the ADL
and translating it to a Python equivalent using the classes defined
in the OSHIP implementation of openEHR.  These Python versions of
archetypes along with the openEHR reference model can be used by
applications outside of OSHIP if desired.</P>
<P STYLE="margin-bottom: 0in"><BR>
</P>
<P STYLE="margin-bottom: 0in">The ADL files have long, unwieldy names
like openEHR-EHR-CLUSTER.checklist_item-general.v1 The structure and
purpose of these names are described in the ADL references.  These
names are virtually unusable as a Python file name and classname.  In
the OSHIP km  we break down the components of the ADL file name and
create a hierarchy as shown below (ignoring the .svn folders). 
</P>
<P STYLE="margin-bottom: 0in"><BR>
</P>
<P STYLE="margin-bottom: 0in"><IMG SRC="oship_structure_html_45034d4c.png" NAME="graphics3" ALIGN=LEFT WIDTH=665 HEIGHT=445 BORDER=0><BR>
</P>
<P STYLE="margin-bottom: 0in">Therefore the above named ADL file will
be translated to a Python class as:</P>
<P STYLE="margin-bottom: 0in"><B>class
ChecklistItemGeneralv1(Archetype,grok.Model):</B> 
</P>
<P STYLE="margin-bottom: 0in">and it will be located in a file named
checklist_item-general.py, in the openehr/ehr/cluster folder.</P>
<P STYLE="margin-bottom: 0in"><BR>
</P>
<P STYLE="margin-bottom: 0in">This allows us to use dot notation (in
code) and folder separators (in templates) to specify the archetype
details needed.</P>
<P STYLE="margin-bottom: 0in"><BR>
</P>
<P STYLE="margin-bottom: 0in"><BR>
</P>
<P STYLE="margin-bottom: 0in"><BR>
</P>
<P STYLE="margin-bottom: 0in"><BR>
</P>
<P STYLE="margin-bottom: 0in">The openEHR reference model follows the
package naming format of the documentation. 
</P>
<P STYLE="margin-bottom: 0in"><BR>
</P>
<P STYLE="margin-bottom: 0in"><IMG SRC="oship_structure_html_m11c4a819.png" NAME="graphics2" ALIGN=LEFT WIDTH=665 HEIGHT=124 BORDER=0><BR>
</P>
</BODY>
</HTML>